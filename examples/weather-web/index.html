<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Weather App</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link" aria-label="Skip to main content">Skip to main content</a>
    
    <!-- High contrast toggle -->
    <div class="accessibility-controls" role="toolbar" aria-label="Accessibility options">
        <button id="high-contrast-toggle" 
                type="button"
                class="contrast-toggle"
                aria-label="Toggle high contrast mode"
                aria-pressed="false">
            <span class="visually-hidden">High contrast mode</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-4.08 3.06-7.44 7-7.93v15.86z"/>
            </svg>
        </button>
    </div>

    <div class="app-container">
        <header role="banner">
            <h1 id="app-title">Weather Dashboard</h1>
        </header>

        <main id="main-content" role="main">
            <!-- Search Section -->
            <section class="search-section" aria-labelledby="search-heading">
                <h2 id="search-heading" class="visually-hidden">Search for weather information</h2>
                
                <div class="search-container" role="search">
                    <label for="location-input" class="visually-hidden">Enter city name or location</label>
                    <input 
                        type="text" 
                        id="location-input"
                        class="location-input"
                        placeholder="Enter city name..."
                        aria-describedby="search-instructions"
                        autocomplete="off"
                        role="combobox"
                        aria-expanded="false"
                        aria-haspopup="listbox"
                        aria-autocomplete="list">
                    
                    <div id="search-instructions" class="visually-hidden">
                        Type city name and press Enter or click search button to get weather information
                    </div>
                    
                    <button 
                        type="button"
                        id="search-btn"
                        class="search-btn"
                        aria-label="Search for weather">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                    
                    <button 
                        type="button"
                        id="location-btn"
                        class="location-btn"
                        aria-label="Use current location">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                    </button>
                </div>

                <!-- Search suggestions dropdown -->
                <ul id="search-suggestions" 
                    class="search-suggestions" 
                    role="listbox" 
                    aria-label="Location suggestions"
                    hidden></ul>
            </section>

            <!-- Loading indicator -->
            <div id="loading-indicator" 
                 class="loading" 
                 role="status" 
                 aria-label="Loading weather data"
                 hidden>
                <div class="spinner" aria-hidden="true"></div>
                <span class="loading-text">Loading weather data...</span>
            </div>

            <!-- Error message -->
            <div id="error-message" 
                 class="error-message" 
                 role="alert" 
                 aria-live="polite"
                 hidden></div>

            <!-- Weather display -->
            <section id="weather-display" 
                     class="weather-display" 
                     aria-labelledby="current-weather-heading"
                     hidden>
                
                <div class="current-weather" tabindex="0">
                    <h2 id="current-weather-heading">Current Weather</h2>
                    
                    <div class="weather-main">
                        <div class="location-info">
                            <h3 id="current-location" class="location-name"></h3>
                            <p id="current-date" class="date"></p>
                        </div>
                        
                        <div class="temperature-display">
                            <img id="weather-icon" 
                                 class="weather-icon" 
                                 alt=""
                                 role="img">
                            <span id="current-temp" 
                                  class="temperature"
                                  aria-label="Current temperature"></span>
                        </div>
                    </div>
                    
                    <div class="weather-details">
                        <div class="detail-item" role="group" aria-labelledby="condition-label">
                            <span id="condition-label" class="label">Condition</span>
                            <span id="weather-condition" class="value"></span>
                        </div>
                        
                        <div class="detail-item" role="group" aria-labelledby="feels-like-label">
                            <span id="feels-like-label" class="label">Feels like</span>
                            <span id="feels-like" class="value"></span>
                        </div>
                        
                        <div class="detail-item" role="group" aria-labelledby="humidity-label">
                            <span id="humidity-label" class="label">Humidity</span>
                            <span id="humidity" class="value"></span>
                        </div>
                        
                        <div class="detail-item" role="group" aria-labelledby="wind-label">
                            <span id="wind-label" class="label">Wind</span>
                            <span id="wind-speed" class="value"></span>
                        </div>
                    </div>
                </div>

                <!-- 5-day forecast -->
                <div class="forecast-section">
                    <h3 id="forecast-heading">5-Day Forecast</h3>
                    <div id="forecast-container" 
                         class="forecast-container" 
                         role="group" 
                         aria-labelledby="forecast-heading">
                    </div>
                </div>
            </section>
        </main>

        <footer role="contentinfo">
            <p>&copy; 2024 Weather Dashboard. Weather data provided by OpenWeatherMap API.</p>
        </footer>
    </div>

    <!-- Live region for announcements -->
    <div id="announcements" 
         aria-live="polite" 
         aria-atomic="true" 
         class="visually-hidden"></div>

    <script src="js/accessibility.js"></script>
    <script src="js/weather-api.js"></script>
    <script src="js/weather-display.js"></script>
    <script src="js/search.js"></script>
    <script src="js/app.js"></script>
</body>
</html>